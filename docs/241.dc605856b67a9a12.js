"use strict";(self.webpackChunkmanager_frontend=self.webpackChunkmanager_frontend||[]).push([[241],{8241:(G,m,a)=>{a.r(m),a.d(m,{ItineraryModule:()=>x});var d=a(177),h=a(5574),e=a(4438),p=a(2100),F=a(2973);const M=["*"];let b=(()=>{class n{style;styleClass;layout="horizontal";type="solid";align;containerClass(){return{"p-divider p-component":!0,"p-divider-horizontal":"horizontal"===this.layout,"p-divider-vertical":"vertical"===this.layout,"p-divider-solid":"solid"===this.type,"p-divider-dashed":"dashed"===this.type,"p-divider-dotted":"dotted"===this.type,"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align),"p-divider-center":"horizontal"===this.layout&&"center"===this.align||"vertical"===this.layout&&(!this.align||"center"===this.align),"p-divider-right":"horizontal"===this.layout&&"right"===this.align,"p-divider-top":"vertical"===this.layout&&"top"===this.align,"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-divider"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",layout:"layout",type:"type",align:"align"},ngContentSelectors:M,decls:3,vars:6,consts:[["role","separator",3,"ngClass","ngStyle"],[1,"p-divider-content"]],template:function(r,t){1&r&&(e.NAR(),e.j41(0,"div",0)(1,"div",1),e.SdG(2),e.k0s()()),2&r&&(e.HbH(t.styleClass),e.Y8G("ngClass",t.containerClass())("ngStyle",t.style),e.BMQ("aria-orientation",t.layout)("data-pc-name","divider"))},dependencies:[d.YU,d.B3],styles:['@layer primeng{.p-divider-horizontal{display:flex;width:100%;position:relative;align-items:center}.p-divider-horizontal:before{position:absolute;display:block;top:50%;left:0;width:100%;content:""}.p-divider-horizontal.p-divider-left{justify-content:flex-start}.p-divider-horizontal.p-divider-right{justify-content:flex-end}.p-divider-horizontal.p-divider-center{justify-content:center}.p-divider-content{z-index:1}.p-divider-vertical{min-height:100%;margin:0 1rem;display:flex;position:relative;justify-content:center}.p-divider-vertical:before{position:absolute;display:block;top:0;left:50%;height:100%;content:""}.p-divider-vertical.p-divider-top{align-items:flex-start}.p-divider-vertical.p-divider-center{align-items:center}.p-divider-vertical.p-divider-bottom{align-items:flex-end}.p-divider-solid.p-divider-horizontal:before{border-top-style:solid}.p-divider-solid.p-divider-vertical:before{border-left-style:solid}.p-divider-dashed.p-divider-horizontal:before{border-top-style:dashed}.p-divider-dashed.p-divider-vertical:before{border-left-style:dashed}.p-divider-dotted.p-divider-horizontal:before{border-top-style:dotted}.p-divider-dotted.p-divider-vertical:before{border-left-style:dotted}}\n'],encapsulation:2,changeDetection:0})}return n})(),I=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[d.MD]})}return n})(),D=(()=>{class n{calculateActualDate(i,r){if(null!=i&&null!=r){if(i.minute+=r,i.minute>60){let t=Math.floor(i.minute/60);if(i.minute=i.minute%60,i.hour+=t,i.hour>24){let l=Math.floor(i.hour/24);i.hour=i.hour%24;let o=new Date;o.setFullYear(i.year),o.setMonth(i.month-1),o.setDate(i.day),o.setDate(o.getDate()+l),i.day=o.getDate(),i.month=o.getMonth()+1,i.year=o.getFullYear()}}return i}}formatDate(i){return null==i?"":i.day+"/"+i.month+"/"+i.day+"  "+i.hour+":"+i.minute}constructor(i,r,t){this.ref=i,this.config=r,this.companyService=t,this.expectedDepartureTime="",this.expectedArrivalTime="",this.actualDepartureTime="",this.actualArrivalTime="",this.selectedItinerary=this.config.data.itinerary,this.expectedDepartureTime=this.formatDate(this.selectedItinerary?.departureTime),this.expectedArrivalTime=this.formatDate(this.selectedItinerary?.arrivalTime);let l=this.calculateActualDate(this.selectedItinerary?.departureTime,this.selectedItinerary?.lateDepartureMinutes),o=this.calculateActualDate(this.selectedItinerary?.arrivalTime,this.selectedItinerary?.lateArrivalMinutes);this.actualArrivalTime=this.formatDate(o),this.actualDepartureTime=this.formatDate(l),this.companyService.getDataCurrent().subscribe(s=>{this.company=s})}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(p.Pw),e.rXU(p.sb),e.rXU(F.B))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-view-itinerary"]],decls:37,vars:11,consts:[[1,"main-content"],[1,"divided-content"],[1,"departure-arrival-combo"],[1,"departure"],["layout","vertical"],[1,"arrival"]],template:function(r,t){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()(),e.nrm(7,"br"),e.j41(8,"p"),e.EFF(9),e.k0s()(),e.j41(10,"p-divider")(11,"span"),e.EFF(12,"Departure and Arrival"),e.k0s()(),e.j41(13,"div",2)(14,"div",3)(15,"h3"),e.EFF(16,"Departure"),e.k0s(),e.j41(17,"p"),e.EFF(18),e.k0s(),e.j41(19,"p"),e.EFF(20),e.k0s(),e.j41(21,"p"),e.EFF(22),e.k0s(),e.j41(23,"p"),e.EFF(24),e.k0s()(),e.nrm(25,"p-divider",4),e.j41(26,"div",5)(27,"h3"),e.EFF(28,"Arrival"),e.k0s(),e.j41(29,"p"),e.EFF(30),e.k0s(),e.j41(31,"p"),e.EFF(32),e.k0s(),e.j41(33,"p"),e.EFF(34),e.k0s(),e.j41(35,"p"),e.EFF(36),e.k0s()()()()),2&r&&(e.R7$(4),e.SpI("Flight Number Reference: ",null==t.selectedItinerary?null:t.selectedItinerary.flightNumber,""),e.R7$(2),e.SpI("Crew ID: ",null==t.selectedItinerary?null:t.selectedItinerary.crewNumber,""),e.R7$(3),e.SpI("Company Operating The Flight: ",null==t.company?null:t.company.name,""),e.R7$(9),e.SpI("Departure: ",null==t.selectedItinerary?null:t.selectedItinerary.departure,""),e.R7$(2),e.SpI("Scheduled Departure Time: ",t.expectedDepartureTime,""),e.R7$(2),e.SpI("Departure Delay: +",null==t.selectedItinerary?null:t.selectedItinerary.lateDepartureMinutes," minutes"),e.R7$(2),e.SpI("Actual Departure Time: ",t.actualDepartureTime,""),e.R7$(6),e.SpI("Arrival: ",null==t.selectedItinerary?null:t.selectedItinerary.arrival,""),e.R7$(2),e.SpI("Scheduled Arrival Time: ",t.expectedArrivalTime,""),e.R7$(2),e.SpI("Arrival Delay: +",null==t.selectedItinerary?null:t.selectedItinerary.lateArrivalMinutes," minutes"),e.R7$(2),e.SpI("Actual Arrival Time: ",t.actualArrivalTime,""))},dependencies:[b],styles:[".divided-content[_ngcontent-%COMP%]{padding:10px}.divided-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.main-content[_ngcontent-%COMP%]{width:50vw;height:50vh}.departure-arrival-combo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.departure-arrival-combo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.departure[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px;padding:10px}.departure[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .departure[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.arrival[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px;padding:10px}.arrival[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .arrival[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}"]})}return n})();class T{constructor(B,i,r){this.page=B,this.size=i,this.filter=r}}var c=a(8730),j=a(1626);let P=(()=>{class n{constructor(i){this.http=i}getAll(){return this.http.get(c.c.apiUrl+"itinerary/view/all")}get(i){return this.http.get(c.c.apiUrl+"itinerary/view?id="+i)}delete(i){return this.http.delete(c.c.apiUrl+"itinerary/delete?id="+i)}update(i,r){return this.http.post(c.c.apiUrl+"itinerary/update?id="+i,r)}getFiltered(i){return this.http.post(c.c.apiUrl+"itinerary/view/filtered",i)}static#e=this.\u0275fac=function(r){return new(r||n)(e.KVO(j.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u=a(9417),g=a(2346),k=a(7921),v=a(2242),y=a(5779);const O=["*"];let w=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-floatLabel"]],ngContentSelectors:O,decls:2,vars:0,consts:[[1,"p-float-label"]],template:function(r,t){1&r&&(e.NAR(),e.j41(0,"span",0),e.SdG(1),e.k0s())},encapsulation:2,changeDetection:0})}return n})(),A=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[d.MD,y.Gg,h.iI,y.Gg]})}return n})();var f=a(8833);const R=["itineraryTable"],S=[{path:"",component:(()=>{class n{constructor(i,r){this.service=i,this.dialogService=r,this.headers=["Flight Number","Departure","Arrival","Departure Time","Arrival Time"],this.keys=["flightNumber","departure","arrival","departureTimeFormatted","arrivalTimeFormatted"],this.data=[],this.page=0,this.size=10,this.max_page=0,this.max_itineraries=0,this.size_options=[10,20,30],this.filter=""}ngOnInit(){this.refresh()}refresh(){let i=new T(this.page,this.size,this.filter);this.service.getFiltered(i).subscribe(r=>{r.page.forEach(t=>{t.departureTimeFormatted=t.departureTime.day+"/"+t.departureTime.month+"/"+t.departureTime.year+"  "+t.departureTime.hour+":"+t.departureTime.minute,t.lateDepartureMinutes>0&&(t.departureTimeFormatted+="  +"+t.lateDepartureMinutes.toString()+" minutes late"),t.arrivalTimeFormatted=t.arrivalTime.day+"/"+t.arrivalTime.month+"/"+t.arrivalTime.year+"  "+t.arrivalTime.hour+":"+t.arrivalTime.minute,t.lateArrivalMinutes>0&&(t.arrivalTimeFormatted+="  +"+t.lateArrivalMinutes.toString()+" minutes late")}),this.data=r.page,this.max_itineraries=r.max_itineraries,this.max_page=Math.ceil(r.max_itineraries/((this.page+1)*this.size)),r.max_itineraries<=this.size&&(this.max_page=0)})}show(i){this.ref=this.dialogService.open(D,{header:i.flightNumber,data:{itinerary:i}}),this.ref.onClose.subscribe(()=>{this.tableChild.autoDeselect()})}removePage(){0!=this.page&&(this.page--,this.refresh())}addPage(){this.page>=this.max_page||(this.page++,this.refresh())}changePaginator(){this.page=0,this.refresh()}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(P),e.rXU(p.o3))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-itinerary-page"]],viewQuery:function(r,t){if(1&r&&e.GBs(R,5),2&r){let l;e.mGM(l=e.lsd())&&(t.tableChild=l.first)}},decls:21,vars:8,consts:[["itineraryTable",""],[1,"itineraryPageWrapper"],[2,"display","flex","justify-content","space-between","align-items","center"],[2,"display","flex","align-items","center"],["fontIcon","mode_of_travel",2,"height","50px","font-size","50px","width","50px"],["pInputText","",3,"ngModelChange","ngModel"],["for","filter"],[3,"onRowClick","headers","keys","viewData"],[1,"airportFooter"],[1,"mx-1","text-color","right_page_alignement"],[1,"round-button",3,"click","disabled"],[3,"ngModelChange","onChange","options","ngModel"]],template:function(r,t){if(1&r){const l=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"mat-icon",4),e.j41(4,"h1"),e.EFF(5,"Itineraries"),e.k0s()(),e.j41(6,"p-floatLabel")(7,"input",5),e.mxI("ngModelChange",function(s){return e.eBV(l),e.DH7(t.filter,s)||(t.filter=s),e.Njj(s)}),e.bIt("ngModelChange",function(){return e.eBV(l),e.Njj(t.changePaginator())}),e.k0s(),e.j41(8,"label",6),e.EFF(9,"Filter by flight number"),e.k0s()()(),e.j41(10,"app-data-table",7,0),e.bIt("onRowClick",function(s){return e.eBV(l),e.Njj(t.show(s))}),e.k0s(),e.j41(12,"div",8)(13,"span",9),e.EFF(14,"Items per page: "),e.k0s(),e.j41(15,"div")(16,"button",10),e.bIt("click",function(){return e.eBV(l),e.Njj(t.removePage())}),e.EFF(17,"<<"),e.k0s(),e.j41(18,"p-dropdown",11),e.mxI("ngModelChange",function(s){return e.eBV(l),e.DH7(t.size,s)||(t.size=s),e.Njj(s)}),e.bIt("onChange",function(){return e.eBV(l),e.Njj(t.changePaginator())}),e.k0s(),e.j41(19,"button",10),e.bIt("click",function(){return e.eBV(l),e.Njj(t.addPage())}),e.EFF(20,">>"),e.k0s()()()()}2&r&&(e.R7$(7),e.R50("ngModel",t.filter),e.R7$(3),e.Y8G("headers",t.headers)("keys",t.keys)("viewData",t.data),e.R7$(6),e.Y8G("disabled",0===t.page),e.R7$(2),e.Y8G("options",t.size_options),e.R50("ngModel",t.size),e.R7$(),e.Y8G("disabled",t.page>=t.max_page))},dependencies:[u.me,u.BC,u.vS,g.An,k.u,v.S,w,f.ms],styles:[".itineraryPageWrapper[_ngcontent-%COMP%]{width:100vw;height:85vh;display:flex;flex-direction:column;gap:20px;padding:20px}.itineraryPageWrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.airportFooter[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:center;padding-top:2%}.round-button[_ngcontent-%COMP%]{background-color:transparent;border:none;border-radius:50%;padding:15px;transition:background-color .3s;margin:0 5px}.round-button[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}input[_ngcontent-%COMP%]{height:30px}"]})}return n})()}];let z=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({imports:[h.iI.forChild(S),h.iI]})}return n})();var C=a(9851),E=a(7303);let x=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({providers:[p.o3],imports:[d.MD,z,C.rO,u.YN,g.m_,E.R,p.k_,I,v.u,A,C.rO,f.kr]})}return n})()}}]);