"use strict";(self.webpackChunkmanager_frontend=self.webpackChunkmanager_frontend||[]).push([[717],{9717:(N,y,s)=>{s.r(y),s.d(y,{CompanyModule:()=>H});var p=s(177),f=s(5574);class h{constructor(l,t,i,n){this.name=l,this.fleet=t,this.contactData=i,this.crews=n}}var e=s(4438),g=s(2973),_=s(491),B=s(5779),d=s(9417),m=s(1141),v=s(6781),w=s(5430);const D=()=>({width:"28%"});function S(a,l){if(1&a&&(e.j41(0,"div"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&a){const t=l.$implicit;e.R7$(),e.Lme(" ",t.key,": ",t.value,"")}}function k(a,l){if(1&a&&(e.j41(0,"div"),e.DNE(1,S,3,2,"div",18),e.k0s()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.contactData)}}function x(a,l){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG();return e.Njj(r.deleteCompany(n))}),e.k0s()()}}function P(a,l){if(1&a&&(e.j41(0,"div",14)(1,"p-card",15),e.EFF(2),e.nrm(3,"br"),e.EFF(4),e.DNE(5,k,2,1,"div",16)(6,x,2,0,"ng-template",17),e.k0s()()),2&a){const t=l.$implicit;e.R7$(),e.FS9("header",t.name),e.R7$(),e.SpI(" Fleet: ",t.fleet,""),e.R7$(2),e.SpI(" Crew members: ",t.crews," "),e.R7$(),e.Y8G("ngIf",t.contactData)}}let T=(()=>{class a{constructor(t,i){this.service=t,this.cdr=i,this.data=[],this.addCompanyDialog=!1,this.newCompanyName="",this.newCompanyEmail="",this.saveEnabled=!1,this.deleteCompanyDialog=!1,this.acknowledgment=!1,this.selectedCompany=new h("",0,[],0)}ngOnInit(){this.refresh()}refresh(){this.data=[],this.cdr.detectChanges(),this.service.getDataAdmin().subscribe(t=>{t.forEach(i=>{let n=new h("",-1,[],-1);n.name=i.name,n.crews=i.crews,n.fleet=i.fleet,Object.keys(i.contactData).forEach(r=>{n.contactData.push({key:r,value:i.contactData[r]})}),this.data.push(n)}),this.cdr.detectChanges()})}createNewCompany(){this.service.saveCompany(this.newCompanyName,this.newCompanyEmail).subscribe(()=>{}),this.addCompanyDialog=!1,this.newCompanyName="",this.newCompanyEmail="",this.refresh()}initNewCompany(){this.addCompanyDialog=!0}deleteCompany(t){this.deleteCompanyDialog=!0,this.selectedCompany=t}deleteCompany1(){this.service.deleteCompany(this.selectedCompany.name).subscribe(()=>{this.refresh()})}refreshSaveState(){this.saveEnabled=""!=this.newCompanyName.trim()&&""!=this.newCompanyEmail.trim()}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(g.B),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-company-page"]],decls:26,vars:17,consts:[[1,"companyPageWrapper"],[1,"companyPageHeader"],["pButton","","label","Create a new company","icon","pi pi-plus",1,"createCompanyButton","green",3,"click"],[1,"grid"],["class","card-rows",4,"ngFor","ngForOf"],["header","Create a new company",3,"visibleChange","visible","modal","draggable"],[1,"createCompanyDialogWrapper"],[1,"createCompanyInput"],["pInputText","",3,"ngModelChange","change","ngModel"],["label","Create","icon","pi pi-plus",3,"click","disabled"],["header","Warning",3,"visibleChange","visible","modal","draggable"],[1,"ackDiv"],["inputId","binary",3,"ngModelChange","ngModel","binary"],["pButton","","label","Delete","icon","pi pi-exclamation-triangle",1,"red","deleteCompanyBtn",3,"click","disabled"],[1,"card-rows"],[1,"card",3,"header"],[4,"ngIf"],["pTemplate","footer"],[4,"ngFor","ngForOf"],["pButton","","label","Delete","icon","pi pi-exclamation-triangle",1,"red","deleteCompanyBtn",3,"click"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"Company list"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return n.initNewCompany()}),e.k0s()(),e.j41(5,"div",3),e.DNE(6,P,7,4,"div",4),e.k0s(),e.j41(7,"p-dialog",5),e.mxI("visibleChange",function(o){return e.DH7(n.addCompanyDialog,o)||(n.addCompanyDialog=o),o}),e.j41(8,"div",6)(9,"div",7)(10,"p"),e.EFF(11,"Name:"),e.k0s(),e.j41(12,"input",8),e.mxI("ngModelChange",function(o){return e.DH7(n.newCompanyName,o)||(n.newCompanyName=o),o}),e.bIt("change",function(){return n.refreshSaveState()}),e.k0s()(),e.j41(13,"div",7)(14,"p"),e.EFF(15,"Email:"),e.k0s(),e.j41(16,"input",8),e.mxI("ngModelChange",function(o){return e.DH7(n.newCompanyEmail,o)||(n.newCompanyEmail=o),o}),e.bIt("change",function(){return n.refreshSaveState()}),e.k0s()(),e.j41(17,"p-button",9),e.bIt("click",function(){return n.createNewCompany()}),e.k0s()()(),e.j41(18,"p-dialog",10),e.mxI("visibleChange",function(o){return e.DH7(n.deleteCompanyDialog,o)||(n.deleteCompanyDialog=o),o}),e.j41(19,"p"),e.EFF(20),e.k0s(),e.j41(21,"div",11)(22,"p-checkbox",12),e.mxI("ngModelChange",function(o){return e.DH7(n.acknowledgment,o)||(n.acknowledgment=o),o}),e.k0s(),e.j41(23,"p"),e.EFF(24,"I acknowledge that this action is irreversible and take responsability for any damages that should occour after any mistaken deletion of the aforementioned company"),e.k0s()(),e.j41(25,"button",13),e.bIt("click",function(){return n.deleteCompany1()}),e.k0s()()()),2&i&&(e.R7$(6),e.Y8G("ngForOf",n.data),e.R7$(),e.R50("visible",n.addCompanyDialog),e.Y8G("modal",!0)("draggable",!1),e.R7$(5),e.R50("ngModel",n.newCompanyName),e.R7$(4),e.R50("ngModel",n.newCompanyEmail),e.R7$(),e.Y8G("disabled",!n.saveEnabled),e.R7$(),e.Aen(e.lJ4(16,D)),e.R50("visible",n.deleteCompanyDialog),e.Y8G("modal",!0)("draggable",!1),e.R7$(2),e.SpI("Are you sure you want to delete the company ",n.selectedCompany.name,"?"),e.R7$(2),e.R50("ngModel",n.acknowledgment),e.Y8G("binary",!0),e.R7$(3),e.Y8G("disabled",!n.acknowledgment))},dependencies:[p.Sq,p.bT,_.Z,B.Ei,d.me,d.BC,d.vS,m._f,m.$n,v.l,w.Sc],styles:[".companyPageWrapper[_ngcontent-%COMP%]{padding:2% 4% 4%;overflow-y:auto;height:90vh}.companyPageWrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-left:50px}.card-rows[_ngcontent-%COMP%]{margin:10px;width:22%}.attr-rep[_ngcontent-%COMP%]{font-size:12px}.w-full[_ngcontent-%COMP%]{margin:25px}.card[_ngcontent-%COMP%]{height:100%}.companyPageHeader[_ngcontent-%COMP%]{position:relative;margin-bottom:2%}.companyPageHeader[_ngcontent-%COMP%]   .createCompanyButton[_ngcontent-%COMP%]{align-self:right;position:absolute;right:0;top:-20%}.createCompanyDialogWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.createCompanyInput[_ngcontent-%COMP%]{width:100%}.createCompanyInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70%;height:30px}.createCompanyInput[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:30%;margin:0;display:inline-block}  .deleteCompanyBtn{width:100%}.ackDiv[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-items:flex-start}.ackDiv[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ff5757;font-style:italic;font-size:13px}"]})}return a})();var C=s(6206),u=s(655);class E{constructor(l,t){this.name=l,this.contactData=t}}var b=s(5473),M=s(1631);function V(a,l){if(1&a){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"button",14),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.deleteContact(n.key))}),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s()(),e.j41(5,"input",4),e.mxI("ngModelChange",function(n){const r=e.eBV(t).$implicit;return e.DH7(r.value,n)||(r.value=n),e.Njj(n)}),e.bIt("input",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.refreshSaveState())}),e.k0s()()}if(2&a){const t=l.$implicit,i=e.XpG();e.R7$(2),e.Y8G("hidden",!i.editMode||"email"==t.key),e.R7$(2),e.SpI("",t.key[0].toLocaleUpperCase()+t.key.slice(1),":"),e.R7$(),e.R50("ngModel",t.value),e.Y8G("disabled",!i.editMode)}}function I(a,l){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"div",3)(2,"input",15),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newContactKey,n)||(r.newContactKey=n),e.Njj(n)}),e.k0s(),e.j41(3,"input",16),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newContactValue,n)||(r.newContactValue=n),e.Njj(n)}),e.k0s()(),e.j41(4,"div",17)(5,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.abortAddContact())}),e.k0s(),e.j41(6,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addContact())}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.R50("ngModel",t.newContactKey),e.Y8G("disabled",!t.editMode),e.R7$(),e.R50("ngModel",t.newContactValue),e.Y8G("disabled",!t.editMode)}}let R=(()=>{class a{constructor(t,i){this.service=t,this.cdr=i,this.data=new h("",0,[],0),this._data=new h("",0,[],0),this.editMode=!1,this.addingContact=!1,this.canSave=!1,this.newContactKey="",this.newContactValue=""}ngOnInit(){this.getData()}enableAddingContact(){this.addingContact=!this.addingContact}getData(){this.service.getDataCurrent().subscribe(t=>{this.data.name=t.name,this.data.crews=t.crews,this.data.fleet=t.fleet,this.data.contactData=[],Object.keys(t.contactData).forEach(i=>{this.data.contactData.push({key:i,value:t.contactData[i]})}),this._data=JSON.parse(JSON.stringify(this.data)),this.refreshSaveState()})}compareMaps(t,i){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],o=i[n];if(r.key!==o.key||r.value!==o.value)return!1}return!0}refreshSaveState(){this.canSave=this.editMode&&(this.data.name!=this._data.name||!this.compareMaps(this.data.contactData,this._data.contactData)),this.cdr.detectChanges()}addContact(){!this.editMode||!this.addingContact||0==this.newContactKey.trim().length||0==this.newContactValue.trim().length||(this.data.contactData.push({key:this.newContactKey,value:this.newContactValue}),this.newContactKey="",this.newContactValue="",this.addingContact=!1,this.refreshSaveState())}revert(){this.canSave&&(this.data=JSON.parse(JSON.stringify(this._data)),this.refreshSaveState(),this.cdr.detectChanges())}deleteContact(t){let i=[];for(let n of this.data.contactData)n.key!=t&&i.push(n);this.data.contactData=i,this.refreshSaveState()}editCompany(){if(this.refreshSaveState(),!this.canSave)return;let t={};for(let n=0;n<this.data.contactData.length;n++)t[this.data.contactData[n].key]=this.data.contactData[n].value;let i=new E(this.data.name,t);this.service.editCompany(this._data.name,i).subscribe(()=>{}),this.getData()}editModeSwitch(){this.editMode||(this.revert(),this.refreshSaveState(),this.abortAddContact())}abortAddContact(){this.addingContact=!1,this.newContactKey="",this.newContactValue=""}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(g.B),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-manage-company"]],decls:16,vars:8,consts:[[1,"manageCompanyWrapper"],["header","Company settings",1,"companyCard"],[1,"companyCardBody"],[1,"companySettingsEntry"],["pInputText","",3,"ngModelChange","input","ngModel","disabled"],["class","companySettingsEntry contacts",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"companyFooter"],["label","Save",3,"click","disabled"],["label","Revert Changes",3,"click","disabled"],["label","Add new contact",3,"click","disabled"],[3,"ngModelChange","ngModel"],[1,"companySettingsEntry","contacts"],[1,"deleteButtonWrapper"],["pButton","","icon","pi pi-trash",1,"deleteButt",3,"click","hidden"],["pInputText","",1,"newKey",3,"ngModelChange","ngModel","disabled"],["pInputText","",1,"newValue",3,"ngModelChange","ngModel","disabled"],[1,"buttons"],["pButton","","icon","pi pi-trash",1,"deleteButt",3,"click"],["pButton","","icon","pi pi-check",1,"acceptButt",3,"click"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"p-panel",1)(2,"div",2)(3,"div",3)(4,"p"),e.EFF(5,"Name:"),e.k0s(),e.j41(6,"input",4),e.mxI("ngModelChange",function(o){return e.DH7(n.data.name,o)||(n.data.name=o),o}),e.bIt("input",function(){return n.refreshSaveState()}),e.k0s()(),e.DNE(7,V,6,4,"div",5)(8,I,7,4,"div",6),e.k0s(),e.j41(9,"div",7)(10,"p-button",8),e.bIt("click",function(){return n.editCompany()}),e.k0s(),e.j41(11,"p-button",9),e.bIt("click",function(){return n.revert()}),e.k0s(),e.j41(12,"p-button",10),e.bIt("click",function(){return n.enableAddingContact()}),e.k0s(),e.j41(13,"p-inputSwitch",11),e.mxI("ngModelChange",function(o){return e.DH7(n.editMode,o)||(n.editMode=o),o}),e.bIt("ngModelChange",function(){return n.editModeSwitch()}),e.k0s(),e.j41(14,"p"),e.EFF(15,"Edit Mode"),e.k0s()()()()),2&i&&(e.R7$(6),e.R50("ngModel",n.data.name),e.Y8G("disabled",!n.editMode),e.R7$(),e.Y8G("ngForOf",n.data.contactData),e.R7$(),e.Y8G("ngIf",n.addingContact),e.R7$(2),e.Y8G("disabled",!n.canSave),e.R7$(),e.Y8G("disabled",!n.canSave),e.R7$(),e.Y8G("disabled",!n.editMode),e.R7$(),e.R50("ngModel",n.editMode))},dependencies:[p.Sq,p.bT,d.me,d.BC,d.vS,m._f,m.$n,b.Z,M.HW],styles:[".manageCompanyWrapper[_ngcontent-%COMP%]{width:100%;height:75%;display:flex;align-items:center;justify-content:center}.companySettingsEntry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;width:40%;margin-left:10%;margin-top:0;margin-bottom:0}.companySettingsEntry[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:15%}.companySettingsEntry[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50%;height:30px}.companySettingsEntry[_ngcontent-%COMP%]{margin:10px 0}.contacts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.companySettingsEntry[_ngcontent-%COMP%]   .newKey[_ngcontent-%COMP%]{width:25%;margin-right:15%;margin-left:10%}.companyCard[_ngcontent-%COMP%]{width:43vw;height:50vh}.companyCardBody[_ngcontent-%COMP%]{height:40vh}.companyFooter[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;flex-direction:row-reverse}.buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-left:10%;margin-top:10px}.companyFooter[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}  .companyFooter p-inputSwitch{margin-top:3px}.deleteButt[_ngcontent-%COMP%]{background-color:red;padding:4px;border-color:red;width:30px;height:30px}.acceptButt[_ngcontent-%COMP%]{background-color:#24e906;padding:4px;border-color:#24e906;width:30px;height:30px}.deleteButtonWrapper[_ngcontent-%COMP%]{height:30px!important;display:inline-flex;align-items:center;width:50%;padding-left:4%}.deleteButtonWrapper[_ngcontent-%COMP%]   .deleteButt[_ngcontent-%COMP%]{margin-right:4%}[hidden][_ngcontent-%COMP%]{visibility:hidden!important}"]})}return a})();const O=[{path:"admin",component:T,canActivate:[C.k],data:{activeGuards:[u.X.ad]}},{path:"mycompany",component:(()=>{class a{constructor(t){this.service=t,this.data=new h("",0,[],0)}ngOnInit(){this.service.getDataCurrent().subscribe(t=>{this.data.name=t.name,this.data.crews=t.crews,this.data.fleet=t.fleet,this.data.contactData=[],Object.keys(t.contactData).forEach(i=>{this.data.contactData.push({key:i,value:t.contactData[i]})})})}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(g.B))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-my-company"]],decls:3,vars:1,consts:[[1,"myCompanyWrapper"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2),e.k0s()()),2&i&&(e.R7$(2),e.SpI("Welcome to ",n.data.name,""))},styles:[".myCompanyWrapper[_ngcontent-%COMP%]{height:100%;width:100%;padding:4%}.myCompanyWrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}"]})}return a})(),canActivate:[C.k],data:{activeGuards:[u.X.cr,u.X.fm]}},{path:"manage",component:R,canActivate:[C.k],data:{activeGuards:[u.X.cm]}}];let L=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.$C({type:a});static#n=this.\u0275inj=e.G2t({imports:[f.iI.forChild(O),f.iI]})}return a})(),j=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[p.MD]})}return a})(),H=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.$C({type:a});static#n=this.\u0275inj=e.G2t({imports:[p.MD,L,_.D,d.YN,j,m.tm,v.P,b.b,M.H_,w.q4]})}return a})()}}]);